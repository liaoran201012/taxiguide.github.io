# ğŸš€ Cloudflare Pages éƒ¨ç½²æŒ‡å—

## é—®é¢˜è¯Šæ–­

ä½ é‡åˆ°çš„é”™è¯¯æç¤ºï¼š
```
Failed: error occurred while running deploy command
```

**åŸå› **ï¼šCloudflare Pages æ„å»ºé…ç½®ä¸æ­£ç¡®æˆ–ç¼ºå°‘å¿…è¦çš„æ–‡ä»¶ã€‚

---

## âœ… è§£å†³æ–¹æ¡ˆï¼šå®Œæ•´éƒ¨ç½²æ­¥éª¤

### ç¬¬ 1 æ­¥ï¼šç™»å½• Cloudflare

1. è®¿é—® [Cloudflare å®˜ç½‘](https://www.cloudflare.com)
2. ç‚¹å‡»å³ä¸Šè§’ **"ç™»å½•"**
3. è¾“å…¥ä½ çš„é‚®ç®±å’Œå¯†ç ç™»å½•
4. è¿›å…¥ **è´¦æˆ·é¦–é¡µ**

---

### ç¬¬ 2 æ­¥ï¼šè¿æ¥ GitHub ä»“åº“

1. åœ¨ Cloudflare å·¦ä¾§èœå•æ‰¾åˆ° **"Workers å’Œ Pages"** â†’ **"Pages"**
2. ç‚¹å‡» **"Create application"** æŒ‰é’®
3. é€‰æ‹© **"Connect to Git"** æ ‡ç­¾é¡µ
4. ç‚¹å‡» **"Connect GitHub"** æŒ‰é’®
5. æˆæƒ Cloudflare è®¿é—®ä½ çš„ GitHubï¼ˆå¦‚æœæç¤ºçš„è¯ï¼‰
6. åœ¨ä»“åº“åˆ—è¡¨ä¸­æ‰¾åˆ° **"Taxi-Guide.github.io"**
7. ç‚¹å‡» **"Select"** é€‰æ‹©è¿™ä¸ªä»“åº“

---

### ç¬¬ 3 æ­¥ï¼šé…ç½®æ„å»ºè®¾ç½®

è¿™æ˜¯æœ€é‡è¦çš„ä¸€æ­¥ï¼æŒ‰ç…§ä»¥ä¸‹é…ç½®ï¼š

| è®¾ç½®é¡¹ | å€¼ |
|------|---|
| **Project name** | `taxi-guide` ï¼ˆæˆ–ä»»æ„åç§°ï¼‰ |
| **Production branch** | `main` (âš ï¸ ä¸è¦é€‰ `gh-pages`ï¼) |
| **Build command** | `npm run build` |
| **Build output directory** | `dist` |
| **Root directory (advanced)** | `/` ï¼ˆç•™ç©ºï¼‰|
| **Environment variables** | ï¼ˆç•™ç©ºï¼‰ |

**å…³é”®ç‚¹**ï¼š
- âœ… Build command å¿…é¡»æ˜¯ `npm run build`
- âœ… Build output directory å¿…é¡»æ˜¯ `dist`ï¼ˆä¸æ˜¯å…¶ä»–ï¼‰
- âœ… Production branch å¿…é¡»æ˜¯ `main`ï¼ˆ`gh-pages` åˆ†æ”¯æ²¡æœ‰æºä»£ç ï¼Œä¼šå¯¼è‡´æ„å»ºå¤±è´¥ï¼‰

---

### ç¬¬ 4 æ­¥ï¼šå®Œæˆéƒ¨ç½²

1. ç‚¹å‡» **"Save and Deploy"** æŒ‰é’®
2. Cloudflare å°†è‡ªåŠ¨ï¼š
   - æ‹‰å–ä½ çš„ GitHub ä»£ç 
   - è¿è¡Œæ„å»ºå‘½ä»¤ `npm run build`
   - ä¸Šä¼  `dist` æ–‡ä»¶å¤¹çš„å†…å®¹
   - ç”Ÿæˆéƒ¨ç½² URL

3. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆé€šå¸¸ 2-5 åˆ†é’Ÿï¼‰
4. çœ‹åˆ° âœ… **"Deployment successful"** æç¤º

---

## ğŸ“‹ éƒ¨ç½²éªŒè¯æ¸…å•

éƒ¨ç½²å®Œæˆåï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

- [ ] Cloudflare æ˜¾ç¤º"éƒ¨ç½²æˆåŠŸ"
- [ ] æœ‰ä¸€ä¸ª `.pages.dev` åŸŸåé“¾æ¥
- [ ] ç‚¹å‡»é“¾æ¥èƒ½æ‰“å¼€ä½ çš„ç½‘ç«™
- [ ] é¦–é¡µæ­£å¸¸æ˜¾ç¤º
- [ ] ç‚¹å‡» "About" èƒ½è·³è½¬åˆ°å…³äºé¡µé¢
- [ ] ç‚¹å‡» "Contact" èƒ½è·³è½¬åˆ°è”ç³»é¡µé¢
- [ ] Header å¯¼èˆªæ­£å¸¸å·¥ä½œ
- [ ] Footer é“¾æ¥å¯ç‚¹å‡»
- [ ] æ²¡æœ‰å‡ºç° 404 é”™è¯¯

---

## ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1ï¼šæ„å»ºå¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Failed: error occurred while running deploy command
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `package.json` ä¸­çš„æ„å»ºå‘½ä»¤
   ```bash
   npm run build  # åº”è¯¥èƒ½ç”Ÿæˆ dist æ–‡ä»¶å¤¹
   ```

2. ç¡®ä¿ `vite.config.js` é…ç½®æ­£ç¡®ï¼š
   ```javascript
   export default defineConfig({
     plugins: [react()],
     base: './',  // è¿™ä¸€è¡Œå¾ˆé‡è¦
   })
   ```

3. éªŒè¯æœ¬åœ°æ„å»ºæ˜¯å¦æˆåŠŸï¼š
   ```bash
   npm install
   npm run build
   ls dist/  # åº”è¯¥çœ‹åˆ°æ–‡ä»¶
   ```

### é—®é¢˜ 1.5ï¼šCloudflare æ˜¾ç¤º "No package.json found" æˆ–æ„å»ºç«‹å³å¤±è´¥

**åŸå› **ï¼šä½ å¯èƒ½é€‰æ‹©äº† `gh-pages` åˆ†æ”¯ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. è¿›å…¥ Cloudflare Pages é¡¹ç›®è®¾ç½®
2. ç‚¹å‡» **"Settings"** -> **"Builds & deployments"**
3. ç‚¹å‡» **"Configure Production deployments"**
4. å°† **Production branch** æ”¹ä¸º `main`
5. ä¿å­˜å¹¶é‡æ–°éƒ¨ç½²

### é—®é¢˜ 2ï¼šé¡µé¢æ˜¾ç¤º 404

è¿™æ˜¯å› ä¸º SPAï¼ˆå•é¡µåº”ç”¨ï¼‰çš„è·¯ç”±é—®é¢˜ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
- âœ… æˆ‘ä»¬å·²ç»åœ¨ `public/_redirects` æ–‡ä»¶ä¸­é…ç½®äº†é‡å®šå‘
- ç¡®ä¿ `_redirects` æ–‡ä»¶å­˜åœ¨å¹¶åŒ…å«ï¼š
  ```
  /* /index.html 200
  ```

### é—®é¢˜ 3ï¼šæ ·å¼ä¸¢å¤±

**åŸå› **ï¼šé™æ€èµ„æºè·¯å¾„é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿ `vite.config.js` ä¸­æœ‰ `base: './'`
- é‡æ–°æ„å»ºå¹¶éƒ¨ç½²

### é—®é¢˜ 4ï¼šéƒ¨ç½²ç¼“æ…¢

**åŸå› **ï¼šé¦–æ¬¡å®‰è£…ä¾èµ–

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ­£å¸¸ç°è±¡ï¼Œé¦–æ¬¡éƒ¨ç½²éœ€è¦ 3-5 åˆ†é’Ÿ
- ä¹‹åçš„éƒ¨ç½²ä¼šæ›´å¿«ï¼ˆåªé‡æ–°æ„å»ºæ”¹å˜çš„æ–‡ä»¶ï¼‰

---

## ğŸŒ è®¾ç½®è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æœ‰è‡ªå·±çš„åŸŸåï¼Œå¯ä»¥è¿æ¥åˆ° Cloudflare Pagesï¼š

1. åœ¨ Cloudflare Pages é¡¹ç›®ä¸­
2. è¿›å…¥ **"Custom domains"** æ ‡ç­¾
3. ç‚¹å‡» **"Set up a custom domain"**
4. è¾“å…¥ä½ çš„åŸŸåï¼ˆå¦‚ `example.com`ï¼‰
5. æŒ‰ç…§æŒ‡ç¤ºæ›´æ–°ä½ çš„åŸŸå DNS è®¾ç½®

---

## ğŸ“Š éƒ¨ç½²åç›‘æ§

### æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—

1. è¿›å…¥ä½ çš„ Pages é¡¹ç›®
2. ç‚¹å‡» **"Deployments"** æ ‡ç­¾
3. ç‚¹å‡»æœ€æ–°çš„éƒ¨ç½²è®°å½•
4. æŸ¥çœ‹æ„å»ºæ—¥å¿—å’Œä»»ä½•é”™è¯¯ä¿¡æ¯

### å¯ç”¨è‡ªåŠ¨éƒ¨ç½²

**é»˜è®¤å·²å¯ç”¨**ï¼šæ¯å½“ä½ æ¨é€ä»£ç åˆ° `main` åˆ†æ”¯æ—¶ï¼ŒCloudflare ä¼šè‡ªåŠ¨éƒ¨ç½²ã€‚

æ¨é€æµç¨‹ï¼š
```bash
# 1. ä¿®æ”¹ä»£ç 
# 2. æäº¤å˜æ›´
git add .
git commit -m "æ›´æ–°ä¿¡æ¯"

# 3. æ¨é€åˆ° GitHub
git push origin main

# Cloudflare ä¼šè‡ªåŠ¨éƒ¨ç½²ï¼
```

---

## ğŸš€ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# æœ¬åœ°æµ‹è¯•
npm run dev      # å¼€å‘æœåŠ¡å™¨

# æ„å»º
npm run build    # ç”Ÿäº§æ„å»º

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview

# æ¨é€åˆ° GitHubï¼ˆè‡ªåŠ¨è§¦å‘ Cloudflare éƒ¨ç½²ï¼‰
git add .
git commit -m "ä½ çš„æäº¤ä¿¡æ¯"
git push origin main
```

---

## âœ¨ éƒ¨ç½²åçš„ä¼˜åŒ–å»ºè®®

### 1. æ€§èƒ½ä¼˜åŒ–
- å¯ç”¨ Cloudflare çš„ç¼“å­˜
- ä½¿ç”¨ Brotli å‹ç¼©
- å¯ç”¨å›¾ç‰‡ä¼˜åŒ–

åœ¨ Cloudflare Pages é¡¹ç›®ä¸­ï¼š
1. è¿›å…¥ **"Settings"**
2. å¯ç”¨ **"Caching"** é€‰é¡¹

### 2. å®‰å…¨è®¾ç½®
- å¯ç”¨ HTTPSï¼ˆè‡ªåŠ¨ï¼‰
- é…ç½® WAFï¼ˆWeb åº”ç”¨é˜²ç«å¢™ï¼‰
- å¯ç”¨ DDoS é˜²æŠ¤ï¼ˆè‡ªåŠ¨ï¼‰

### 3. ç›‘æ§å’Œåˆ†æ
- åœ¨ Cloudflare ä¸­æŸ¥çœ‹å®æ—¶æµé‡
- è®¾ç½®å‘Šè­¦è§„åˆ™
- ç›‘æ§é¡µé¢æ€§èƒ½

---

## ğŸ“ è·å–å¸®åŠ©

### Cloudflare å®˜æ–¹èµ„æº
- [Pages æ–‡æ¡£](https://developers.cloudflare.com/pages/)
- [Pages å¸¸è§é—®é¢˜](https://developers.cloudflare.com/pages/faq/)
- [Cloudflare ç¤¾åŒº](https://community.cloudflare.com/)

### æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
è®¿é—®ä½ çš„ Pages é¡¹ç›®é¢æ¿ï¼š
```
https://dash.cloudflare.com/ â†’ å·¦ä¾§ "Workers å’Œ Pages" â†’ "Pages" â†’ ä½ çš„é¡¹ç›®
```

---

## ğŸ‰ ç¥è´ºï¼

å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä½ ç°åœ¨å·²ç»ï¼š
- âœ… åœ¨ Cloudflare Pages ä¸Šéƒ¨ç½²äº†åº”ç”¨
- âœ… è·å¾—äº†å…è´¹çš„ `.pages.dev` åŸŸå
- âœ… å¯ç”¨äº†è‡ªåŠ¨éƒ¨ç½²
- âœ… ä¿æŠ¤äº†ä½ çš„ç½‘ç«™ï¼ˆå…è´¹ CDN + å®‰å…¨ï¼‰

ä½ çš„åº”ç”¨ç°åœ¨å¯¹å…¨çƒç”¨æˆ·å¼€æ”¾äº†ï¼

---

**æœ€åæ›´æ–°**: 2025-11-28
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
